var ot=Object.defineProperty;var rt=(v,t,s)=>t in v?ot(v,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):v[t]=s;var w=(v,t,s)=>rt(v,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();var q={exports:{}},Z;function lt(){return Z||(Z=1,function(v){(function(){var t=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],s=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ",["ㅗ","ㅏ"],["ㅗ","ㅐ"],["ㅗ","ㅣ"],"ㅛ","ㅜ",["ㅜ","ㅓ"],["ㅜ","ㅔ"],["ㅜ","ㅣ"],"ㅠ","ㅡ",["ㅡ","ㅣ"],"ㅣ"],n=["","ㄱ","ㄲ",["ㄱ","ㅅ"],"ㄴ",["ㄴ","ㅈ"],["ㄴ","ㅎ"],"ㄷ","ㄹ",["ㄹ","ㄱ"],["ㄹ","ㅁ"],["ㄹ","ㅂ"],["ㄹ","ㅅ"],["ㄹ","ㅌ"],["ㄹ","ㅍ"],["ㄹ","ㅎ"],"ㅁ","ㅂ",["ㅂ","ㅅ"],"ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i=44032,r=["ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄸ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅃ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],h=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],M=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],I=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],E=[["ㄱ","ㅅ","ㄳ"],["ㄴ","ㅈ","ㄵ"],["ㄴ","ㅎ","ㄶ"],["ㄹ","ㄱ","ㄺ"],["ㄹ","ㅁ","ㄻ"],["ㄹ","ㅂ","ㄼ"],["ㄹ","ㅅ","ㄽ"],["ㄹ","ㅌ","ㄾ"],["ㄹ","ㅍ","ㄿ"],["ㄹ","ㅎ","ㅀ"],["ㅂ","ㅅ","ㅄ"]],B=[["ㅗ","ㅏ","ㅘ"],["ㅗ","ㅐ","ㅙ"],["ㅗ","ㅣ","ㅚ"],["ㅜ","ㅓ","ㅝ"],["ㅜ","ㅔ","ㅞ"],["ㅜ","ㅣ","ㅟ"],["ㅡ","ㅣ","ㅢ"]],a,b,c,T,D,K;function k(e){for(var o=e.length,p={0:0},l=0;l<o;l++)e[l]&&(p[e[l].charCodeAt(0)]=l);return p}a=k(r),b=k(h),c=k(M),T=k(I);function G(e){for(var o=e.length,p={},l,u,f=0;f<o;f++)l=e[f][0].charCodeAt(0),u=e[f][1].charCodeAt(0),typeof p[l]>"u"&&(p[l]={}),p[l][u]=e[f][2].charCodeAt(0);return p}D=G(E),K=G(B);function j(e){return typeof a[e]<"u"}function N(e){return typeof b[e]<"u"}function O(e){return typeof c[e]<"u"}function X(e){return typeof T[e]<"u"}function _(e){return 44032<=e&&e<=55203}function U(e,o){return K[e]&&K[e][o]?K[e][o]:!1}function W(e,o){return D[e]&&D[e][o]?D[e][o]:!1}var P=function(e,o){if(e===null)throw new Error("Arguments cannot be null");typeof e=="object"&&(e=e.join(""));for(var p=[],l=e.length,u,f,A,S,g,x=0;x<l;x++){var d=[];S=e.charCodeAt(x),_(S)?(S-=i,A=S%28,f=(S-A)/28%21,u=parseInt((S-A)/28/21),d.push(t[u]),typeof s[f]=="object"?d=d.concat(s[f]):d.push(s[f]),A>0&&(typeof n[A]=="object"?d=d.concat(n[A]):d.push(n[A]))):j(S)?(N(S)?g=t[b[S]]:g=n[T[S]],typeof g=="string"?d.push(g):d=d.concat(g)):O(S)?(g=s[c[S]],typeof g=="string"?d.push(g):d=d.concat(g)):d.push(e.charAt(x)),o?p.push(d):p=p.concat(d)}return p},$=function(e){return typeof e!="string"?"":(e=P(e),e.join(""))},Y=function(e){typeof e=="string"&&(e=P(e));var o=[],p=e.length,l,u=0,f=-1,A,S=!1;function g(d){var m,C,V,L=0,J,F="";if(S=!1,!(f+1>d))for(var y=1;;y++){if(y===1){if(m=e[f+y].charCodeAt(0),O(m))if(f+y+1<=d&&O(C=e[f+y+1].charCodeAt(0))){o.push(String.fromCharCode(U(m,C))),f=d;return}else{o.push(e[f+y]),f=d;return}else if(!N(m)){o.push(e[f+y]),f=d;return}F=e[f+y]}else if(y===2)if(C=e[f+y].charCodeAt(0),N(C)){m=W(m,C),F=String.fromCharCode(m),o.push(F),f=d;return}else F=String.fromCharCode((b[m]*21+c[C])*28+i);else y===3?(V=e[f+y].charCodeAt(0),U(C,V)?C=U(C,V):L=V,F=String.fromCharCode((b[m]*21+c[C])*28+T[L]+i)):y===4?(J=e[f+y].charCodeAt(0),W(L,J)?L=W(L,J):L=J,F=String.fromCharCode((b[m]*21+c[C])*28+T[L]+i)):y===5&&(J=e[f+y].charCodeAt(0),L=W(L,J),F=String.fromCharCode((b[m]*21+c[C])*28+T[L]+i));if(f+y>=d){o.push(F),f=d;return}}}for(var x=0;x<p;x++){if(l=e[x].charCodeAt(0),!N(l)&&!O(l)&&!X(l)){g(x-1),g(x),u=0;continue}u===0?N(l)?u=1:O(l)&&(u=4):u==1?O(l)?u=2:W(A,l)?u=5:g(x-1):u==2?X(l)?u=3:O(l)?U(A,l)||(g(x-1),u=4):(g(x-1),u=1):u==3?X(l)?!S&&W(A,l)?S=!0:(g(x-1),u=1):N(l)?(g(x-1),u=1):O(l)&&(g(x-2),u=2):u==4?O(l)?U(A,l)?(g(x),u=0):g(x-1):(g(x-1),u=1):u==5&&(O(l)?(g(x-2),u=2):(g(x-1),u=1)),A=l}return g(x-1),o.join("")},tt=function(e,o){var p=P(e).join(""),l=P(o).join("");return p.indexOf(l)},et=function(e,o){var p=P(e).join(""),l=P(o).join(""),u=P(e,!0),f=new RegExp(l,"gi"),A=[],S;if(!o.length)return[];for(;S=f.exec(p);)A.push(S.index);function g(d){for(var m=0,C=0;m<u.length;++m)if(C+=u[m].length,d<C)return m}function x(d){for(var m=0,C=0;m<u.length;++m)if(C+=u[m].length,d+l.length<=C)return m}return A.map(function(d){return[g(d),x(d)]})};function Q(e){this.string=e,this.disassembled=P(e).join("")}Q.prototype.search=function(e){return P(e).join("").indexOf(this.disassembled)};var st=function(e){typeof e=="object"&&(e=e.join(""));var o=e.charCodeAt(e.length-1);if(_(o)){o-=i;var p=o%28;if(p>0)return!0}else if(j(o))return!0;return!1},it=function(e,o){return P(e).pop()===o},nt={disassemble:P,d:P,disassembleToString:$,ds:$,assemble:Y,a:Y,search:tt,rangeSearch:et,Searcher:Q,endsWithConsonant:st,endsWith:it,isHangul:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),_(e)},isComplete:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),_(e)},isConsonant:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),j(e)},isVowel:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),O(e)},isCho:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),N(e)},isJong:function(e){return typeof e=="string"&&(e=e.charCodeAt(0)),X(e)},isHangulAll:function(e){if(typeof e!="string")return!1;for(var o=0;o<e.length;o++)if(!_(e.charCodeAt(o)))return!1;return!0},isCompleteAll:function(e){if(typeof e!="string")return!1;for(var o=0;o<e.length;o++)if(!_(e.charCodeAt(o)))return!1;return!0},isConsonantAll:function(e){if(typeof e!="string")return!1;for(var o=0;o<e.length;o++)if(!j(e.charCodeAt(o)))return!1;return!0},isVowelAll:function(e){if(typeof e!="string")return!1;for(var o=0;o<e.length;o++)if(!O(e.charCodeAt(o)))return!1;return!0},isChoAll:function(e){if(typeof e!="string")return!1;for(var o=0;o<e.length;o++)if(!N(e.charCodeAt(o)))return!1;return!0},isJongAll:function(e){if(typeof e!="string")return!1;for(var o=0;o<e.length;o++)if(!X(e.charCodeAt(o)))return!1;return!0}};v.exports=nt})()}(q)),q.exports}var z=lt();function ht(){const v=document.getElementById("myCanvas"),t=v.getContext("2d"),s=document.getElementById("show"),n=document.getElementById("enable"),i=[new R({bounds:{x:10,y:20,w:300},maxLength:8},v),new R({fontSize:30,bounds:{x:10,y:50,w:300},placeHolder:"한글을 입력해주세요"},v),new R({bounds:{x:10,y:110,w:300},type:"number",placeHolder:"숫자",maxLength:8},v),new R({bounds:{x:10,y:150,w:300},type:"password",placeHolder:"암호",maxLength:15},v),new R({bounds:{x:10,y:180,w:300},disabled:!0},v)];s.addEventListener("click",()=>{const a=i[i.length-2];a.type==="password"?(a.type="text",s.textContent="Hide"):(a.type="password",s.textContent="Show")}),n.addEventListener("click",()=>{const a=i[i.length-1];a.disabled?(a.disabled=!1,n.textContent="Enable"):(a.disabled=!0,n.textContent="Disable")}),document.addEventListener("keydown",a=>{const b=a.key,c=a.shiftKey;if(b==="Tab"&&!c){M();return}b==="Tab"&&c&&I()});const r=document.getElementById("show2"),h=document.getElementById("enable2");r.addEventListener("click",()=>{const a=document.getElementById("password");a.type==="password"?(a.type="text",r.textContent="Hide"):(a.type="password",r.textContent="Show")}),h.addEventListener("click",()=>{const a=document.getElementById("disabled");a.disabled?(a.disabled=!1,h.textContent="Enable"):(a.disabled=!0,h.textContent="Disable")});function M(){const a=i.findIndex(T=>T.focus),b=a===-1?0:a;let c=(b+1)%i.length;for(;i[c].disabled&&(c=(c+1)%i.length,c!==b););i[b].focus=!1,i[c].focus=!0,i[c].selectAllText()}function I(){const a=i.findIndex(T=>T.focus),b=a===-1?0:a;let c=(b-1+i.length)%i.length;for(;i[c].disabled&&(c=(c-1+i.length)%i.length,c!==b););i[b].focus=!1,i[c].focus=!0,i[c].selectAllText()}let E=0;function B(a){const b=(a-E)/1e3;t.clearRect(0,0,v.width,v.height),i.forEach(c=>c.update(b)),i.forEach(c=>c.draw()),i.forEach(c=>{const{x:T,y:D,w:K}=c.area(),k=c.getMaxLength();if(k===-1)return;t.font="12px Monospaced",t.textAlign="left",t.textBaseline="middle",t.fillStyle="gray";const G=`${k-c.getLength()} remain`,j=t.measureText(G).width;t.fillText(G,T+K-j-8,D-7)}),E=a,window.requestAnimationFrame(B)}requestAnimationFrame(B)}const H=class H{constructor(t,s){w(this,"canvas");w(this,"context");w(this,"value");w(this,"selection");w(this,"isFocused");w(this,"selectionPos");w(this,"blinkTimer");w(this,"maxLength");w(this,"assemblePos");w(this,"startPos");w(this,"wasOver");w(this,"settings");this.canvas=s,this.context=s.getContext("2d"),this.settings=Object.assign({},H.defaultSettings,t),this.value=this.settings.defaultValue,this.selection=[0,0],this.isFocused=!1,this.blinkTimer=0,this.maxLength=this.settings.maxLength,this.resetSelectionPos(),this.resetAssembleMode(),this.startPos=0,this.wasOver=!1,document.addEventListener("keydown",this.onKeyDown.bind(this)),this.canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!0),this.canvas.addEventListener("mousedown",this.onMouseDown.bind(this),!0),document.addEventListener("mouseup",this.onMouseUp.bind(this),!0),this.canvas.addEventListener("dblclick",this.onDoubleClick.bind(this),!0),this.canvas.addEventListener("copy",async n=>this.onCopy.call(this,n)),this.canvas.addEventListener("paste",async n=>this.onPaste.call(this,n)),this.canvas.addEventListener("cut",async n=>this.onCut.call(this,n))}draw(){this.context.font=`${this.settings.fontSize}px ${this.settings.font}`,this.context.textAlign="left",this.context.textBaseline="middle";const t=this.getStartX(),s=this.getStartY(),n=this.area(),i=Math.round(s+Math.round(this.settings.fontSize/2)+1);if(this.context.save(),this.context.beginPath(),this.context.rect(n.x,n.y,n.w+1,n.h+1),this.context.clip(),this.disabled&&(this.context.fillStyle=this.settings.disabledColor,this.context.fillRect(this.settings.bounds.x-this.settings.padding.left,this.settings.bounds.y-this.settings.padding.top,n.w,n.h)),this.isFocused){if(this.isSelected()){const a=this.measureText(this.getSubText(0,Math.min(this.selection[0],this.selection[1]))),b=this.measureText(this.getSelectionText());this.context.fillStyle=this.settings.selectionColor,this.context.fillRect(a+t,s-1,b,this.settings.fontSize+3)}else if(this.cursorBlink()){const a=this.measureText(this.getSubText(0,this.selection[0]));this.context.fillStyle=this.settings.fontColor,this.context.fillRect(a+t,s,1,this.settings.fontSize)}}const[r,h]=this.getSelectionOutside(),M=this.getSelectionText(),I=this.getDrawText(r),E=this.getDrawText(M),B=this.getDrawText(h);this.context.fillStyle=this.disabled?this.settings.disabledFontColor:this.settings.fontColor,this.context.fillText(I,t,i),this.context.fillStyle=this.disabled?this.settings.disabledFontColor:this.settings.selectionFontColor,this.context.fillText(E,t+this.measureText(r),i),this.context.fillStyle=this.disabled?this.settings.disabledFontColor:this.settings.fontColor,this.context.fillText(B,t+this.measureText(r+M),i),this.isEmpty()&&(this.context.fillStyle=this.settings.placeHolderColor,this.context.fillText(this.settings.placeHolder,t,i)),this.isFocused&&this.isAssembleMode()&&this.drawUnderline(),this.drawRect(n.x,n.y,n.w,n.h),this.context.restore()}update(t){this.blinkTimer+=t}moveSelection(t){this.setSelection(t,t)}setSelection(t,s){t=this.clamp(t,0,this.value.length),s=this.clamp(s,0,this.value.length),this.selection[0]=t,this.selection[1]=s,this.blinkTimer=this.settings.caretBlinkRate}isSelected(){return this.selection[0]!==this.selection[1]}isEmpty(){return this.getLength()===0}getLength(){return this.value.length}getMaxLength(){return this.settings.maxLength}set text(t){this.value=t}get text(){return this.value}get focus(){return this.isFocused}set focus(t){t&&!this.disabled?(this.isFocused=!0,this.blinkTimer=this.settings.caretBlinkRate,this.settings.focusCallback(!0)):(this.onStartOfSelection(),this.resetAssembleMode(),this.resetSelectionPos(),this.isFocused=!1,this.settings.focusCallback(!1))}get disabled(){return this.settings.disabled}set disabled(t){this.settings.disabled=t,this.focus=!1}get type(){return this.settings.type}set type(t){this.settings.type=t,this.resetAssembleMode(),this.onCancelOfSelectionEnd()}getDrawText(t){return this.type==="password"?this.settings.passwordChar.repeat(t.length):t}drawUnderline(){const t=this.getStartX(),s=this.getStartY()+this.settings.fontSize-2;this.context.fillStyle=this.settings.underlineColor;const n=this.measureText(this.getAssemblePosBefore()),i=this.measureText(this.getAssemblePosChar());this.context.fillRect(n+t,s,i,2)}getStartX(){return this.settings.bounds.x+this.settings.padding.left+this.settings.border.left}getStartY(){return this.settings.bounds.y+this.settings.padding.top+this.settings.border.top}measureText(t){return this.context.font=`${this.settings.fontSize}px ${this.settings.font}`,this.context.textAlign="left",this.context.textBaseline="middle",this.context.measureText(this.getDrawText(t)).width}cursorBlink(){return Math.floor(this.blinkTimer/this.settings.caretBlinkRate)%2}getSelectionText(){return this.getSubText(this.selection[0],this.selection[1])}getSubText(t,s){return this.value.substring(t,s)}extendSelection(t,s){this.setSelection(t,s)}moveRightBoundary(){const t=Math.max(this.selection[0],this.selection[1]);this.moveSelection(t)}moveLeftBoundary(){const t=Math.min(this.selection[0],this.selection[1]);this.moveSelection(t)}extendRightBoundary(){const t=Math.min(this.selection[0],this.selection[1]);this.extendSelection(t,this.value.length)}extendLeftBoundary(){const t=Math.max(this.selection[0],this.selection[1]);this.extendSelection(t,0)}onRight(t){t.preventDefault();const s=t.altKey,n=t.shiftKey,i=t.metaKey,r=t.ctrlKey;if(this.resetAssembleMode(),this.isSelected()){if(n)if(i||r)this.extendRightBoundary();else if(s){const h=this.getNearestWordIndex(this.selection[1])[1];this.extendSelection(this.selection[0],h)}else this.extendSelection(this.selection[0],this.selection[1]+1);else i||r?this.onEndOfSelection():this.moveRightBoundary();return}if(s){const h=this.getNearestWordIndex(this.selection[1])[1];n?this.extendSelection(this.selection[0],h):this.moveSelection(h);return}if(i||r){n?this.extendSelection(this.selection[0],this.value.length):this.onEndOfSelection();return}n?this.extendSelection(this.selection[0],this.selection[1]+1):this.moveSelection(this.selection[1]+1)}onLeft(t){t.preventDefault();const s=t.altKey,n=t.shiftKey,i=t.metaKey,r=t.ctrlKey;if(this.resetAssembleMode(),this.isSelected()){if(n)if(i||r)this.extendLeftBoundary();else if(s){const h=this.getNearestWordIndex(this.selection[1]-1)[0];this.extendSelection(this.selection[0],h)}else this.extendSelection(this.selection[0],this.selection[1]-1);else i||r?this.onStartOfSelection():this.moveLeftBoundary();return}if(s){const h=this.getNearestWordIndex(this.selection[0]-1)[0];n?this.extendSelection(this.selection[1],h):this.moveSelection(h);return}if(i||r){n?this.extendSelection(this.selection[1],0):this.onStartOfSelection();return}n?this.extendSelection(this.selection[0],this.selection[1]-1):this.moveSelection(this.selection[1]-1)}onStartOfSelection(){this.moveSelection(0)}onEndOfSelection(){this.moveSelection(this.value.length)}onCancelOfSelectionStart(){this.moveSelection(this.selection[0])}onCancelOfSelectionEnd(){this.moveSelection(this.selection[1])}createClipboardEvent(t){return new ClipboardEvent(t,{bubbles:!0,cancelable:!0,clipboardData:null})}handleMetaInput(t){const s=t.key,n=t.metaKey;return n&&(s==="c"||s==="C"||s==="ㅊ")?(this.canvas.dispatchEvent(this.createClipboardEvent("copy")),!0):n&&(s==="v"||s==="V"||s==="ㅍ")?(this.canvas.dispatchEvent(this.createClipboardEvent("paste")),!0):n&&(s==="x"||s==="X"||s==="ㅌ")?(this.canvas.dispatchEvent(this.createClipboardEvent("cut")),!0):n&&(s==="a"||s==="A"||s==="ㅁ")?(t.preventDefault(),this.selectAllText(),!0):!!(n&&(s==="r"||s==="R"||s==="ㄱ"))}handleTypedText(t){const s=t.key;this.handleMetaInput(t)||s.length>1||this.appendValue(s)}isMaxLengthOverflow(t=""){return this.maxLength===-1?!1:this.value.length+t.length>this.maxLength}isNumeric(t){return/^-?\d+$/.test(t)}appendValue(t,s=!1){if(this.type==="number"&&!this.isNumeric(t))return;const[n,i]=this.getSelectionOutside();if(this.isMaxLengthOverflow(t)){const r=this.settings.maxLength-(n.length+i.length),h=t.substring(0,r);h.length>0&&this.handleNonHangul(n,h,i);return}this.isHangul(t)?(this.handleHangul(n,t,i),s&&this.resetAssembleMode()):this.handleNonHangul(n,t,i)}handleHangul(t,s,n){if(this.type==="password"){this.assembleHangul(t,this.convertKoreanToEnglish(s),n);return}this.isAssembleMode()?this.assembleHangul(this.getAssemblePosBefore(),z.a(z.d(this.getAssemblePosChar()+s)),n):this.assembleHangul(t,z.a(z.d(s)),n)}assembleHangul(t,s,n){this.text=t+s+n;const i=t.length+s.length;this.moveSelection(i),this.setAssemblePos(i-1)}handleNonHangul(t,s,n){const i=t.length+s.length;this.text=t+s+n,this.moveSelection(i),this.resetAssembleMode()}onRemove(t){t.preventDefault();const s=t.metaKey;if(this.isSelected()){const[h,M]=this.getSelectionOutside();this.text=h+M,this.moveSelection(h.length);return}if(this.isAssembleMode()&&!s){const h=this.getAssemblePosBefore(),M=z.d(this.getAssemblePosChar()),I=this.getAssemblePosAfter(),E=z.a(M.slice(0,-1));E===""&&this.resetAssembleMode();const B=h+E;this.text=B+I,this.moveSelection(B.length);return}const[n,i]=this.getSelectionOutside(),r=n.slice(0,s?n.length*-1:-1);this.text=r+i,this.moveSelection(r.length)}setAssemblePos(t){this.assemblePos=t}resetAssembleMode(){this.assemblePos=-1}isAssembleMode(){return this.assemblePos!==-1}isHangul(t){const s=t.charCodeAt(0);return s>=4352&&s<=4607||s>=12592&&s<=12687||s>=44032&&s<=55203}isSelectionStart(){return this.selectionPos>=0}resetSelectionPos(){this.selectionPos=-1}textPos(t,s){const n=t-this.area().x;let i=0,r=this.value.length;if(n<this.measureText(this.value)){for(let h=0;h<this.value.length;h++)if(i+=this.measureText(this.value[h]),i>=n){r=h;break}}return r}getMousePos(t){const n=t.target.getBoundingClientRect(),i=t.clientX-n.left,r=t.clientY-n.top;return{x:i,y:r}}onKeyDown(t){if(!this.isFocused)return;switch(t.key){case"Meta":case"Alt":case"Shift":case"Control":case"Tab":case"ArrowUp":case"ArrowDown":break;case"Enter":this.settings.enterCallback(t);break;case"Backspace":this.onRemove(t);break;case"ArrowRight":this.onRight(t);break;case"ArrowLeft":this.onLeft(t);break;case"Escape":this.onCancelOfSelectionEnd();break;case"Home":this.onStartOfSelection();break;case"End":t.preventDefault(),this.onEndOfSelection();break;case" ":t.preventDefault();default:this.handleTypedText(t);break}}onMouseMove(t){const s=this.getMousePos(t);if(this.contains(s.x,s.y)&&!this.disabled?(this.settings.hoverCallback(!0),this.canvas.style.cursor="text",this.wasOver=!0):(this.settings.hoverCallback(!1),this.wasOver&&(this.canvas.style.cursor="default",this.wasOver=!1)),!this.isFocused||!this.isSelectionStart())return;const n=this.textPos(s.x,s.y),i=Math.min(this.selectionPos,n),r=Math.max(this.selectionPos,n);this.extendSelection(i,r)}onMouseDown(t){t.preventDefault();const s=t.button===0,n=this.getMousePos(t);if(this.resetAssembleMode(),s&&this.contains(n.x,n.y)&&!this.disabled){this.focus=!0;const i=this.textPos(n.x,n.y);if(t.detail===3&&i>=this.selection[0]&&i<=this.selection[1]){this.selectAllText();return}this.moveSelection(i),this.selectionPos=i;return}this.focus=!1}onMouseUp(t){this.isFocused&&this.resetSelectionPos()}onDoubleClick(t){if(!this.isFocused)return;t.preventDefault();const s=t.button===0,n=this.getMousePos(t);if(s&&this.contains(n.x,n.y)){const i=this.textPos(n.x,n.y),[r,h]=this.getNearestWordIndex(i);this.extendSelection(r,h)}}async onCopy(t){!this.isFocused||this.type==="password"||this.isEmpty()||await navigator.clipboard.writeText(this.getSelectionText())}async onPaste(t){if(!this.isFocused)return;const s=await navigator.clipboard.readText();this.appendValue(s,!0)}async onCut(t){if(!this.isFocused||this.type==="password"||this.isEmpty())return;await navigator.clipboard.writeText(this.getSelectionText());const[s,n]=this.getSelectionOutside();this.text=s+n,this.moveSelection(s.length)}getNearestWordIndex(t){let s=0,n=this.value.length;for(let i=t-1;i>0;i--)if(H.DELIMITERS.has(this.value[i])){s=i+1;break}for(let i=t+1;i<this.value.length;i++)if(H.DELIMITERS.has(this.value[i])){n=i;break}return[s,n]}selectAllText(){this.extendSelection(0,this.value.length),this.resetAssembleMode()}getSelectionOutside(){const t=Math.min(this.selection[0],this.selection[1]),s=Math.max(this.selection[0],this.selection[1]),n=this.getSubText(0,t),i=this.getSubText(s,this.value.length);return[n,i]}getAssemblePosBefore(){return this.getSubText(0,this.assemblePos)}getAssemblePosChar(){return this.getSubText(this.assemblePos,Math.min(this.assemblePos+1,this.value.length))}getAssemblePosAfter(){return this.getSubText(Math.min(this.assemblePos+1,this.value.length),this.value.length)}area(){return{x:this.settings.bounds.x-this.settings.padding.left-this.settings.border.left,y:this.settings.bounds.y-this.settings.padding.top-this.settings.border.top,w:this.settings.bounds.w+this.settings.padding.right+this.settings.border.right,h:this.settings.fontSize+4+this.settings.padding.bottom+this.settings.border.bottom}}contains(t,s){const n=this.area();return t>=n.x&&t<=this.settings.bounds.x+n.w&&s>=n.y&&s<=this.settings.bounds.y+n.h}drawRect(t,s,n,i){this.context.beginPath();const r=1;this.context.strokeStyle=this.isFocused?this.settings.focusBoxColor:this.disabled?this.settings.disabledBorderColor:this.settings.boxColor,this.context.lineWidth=this.isFocused?this.settings.focusBorder.left:this.settings.border.left,this.context.moveTo(t+.5,s+r),this.context.lineTo(t+.5,s+i),this.context.lineWidth=this.isFocused?this.settings.focusBorder.right:this.settings.border.right,this.context.moveTo(t+n+.5,s+r),this.context.lineTo(t+n+.5,s+i),this.context.lineWidth=this.isFocused?this.settings.focusBorder.top:this.settings.border.top,this.context.moveTo(t+r,s+.5),this.context.lineTo(t+n,s+.5),this.context.lineWidth=this.isFocused?this.settings.focusBorder.bottom:this.settings.border.bottom,this.context.moveTo(t+r,s+i+.5),this.context.lineTo(t+n,s+i+.5),this.context.stroke()}clamp(t,s,n){return Math.min(Math.max(t,s),n)}convertKoreanToEnglish(t){return H.KOREAN_TO_ENGLISH[t]??t}};w(H,"DELIMITERS",new Set([" ",",",".",";",":","/","[","]","-","\\","?"])),w(H,"KOREAN_TO_ENGLISH",{ㅁ:"a",ㄴ:"s",ㅇ:"d",ㄹ:"f",ㅎ:"g",ㅗ:"h",ㅓ:"j",ㅏ:"k",ㅣ:"l",ㅂ:"q",ㅈ:"w",ㄷ:"e",ㄱ:"r",ㅅ:"t",ㅛ:"y",ㅕ:"u",ㅑ:"i",ㅐ:"o",ㅔ:"p",ㅋ:"z",ㅌ:"x",ㅊ:"c",ㅍ:"v",ㅠ:"b",ㅜ:"n",ㅡ:"m",ㅃ:"Q",ㅉ:"W",ㄸ:"E",ㄲ:"R",ㅆ:"T",o:"ㅒ",p:"ㅖ"}),w(H,"defaultSettings",{font:"Apple SD Gothic Neo",fontColor:"#000",selectionFontColor:"#FFF",selectionColor:"#0D0577",boxColor:"#767676",focusBoxColor:"#000",underlineColor:"#000",fontSize:13,maxLength:-1,caretBlinkRate:.5,defaultValue:"",placeHolder:"",placeHolderColor:"rgb(111, 111, 111)",type:"text",disabled:!1,disabledColor:"rgb(247, 247, 247)",disabledFontColor:"#545454",disabledBorderColor:"rgb(204, 204, 204)",passwordChar:"●",bounds:{x:0,y:0,w:100},padding:{top:1,left:1,right:1,bottom:2},border:{top:1,left:1,right:1,bottom:1},focusBorder:{top:3,left:3,right:3,bottom:3},enterCallback:t=>{},hoverCallback:t=>{},focusCallback:t=>{}});let R=H;document.addEventListener("DOMContentLoaded",ht);
